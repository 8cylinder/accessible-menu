var AccessibleMenu=function(){"use strict";var e,t,n,r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Array.from||(Array.from=(e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1,r=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),n)},function(e){var n=this,o=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,l=arguments.length>1?arguments[1]:void 0;if(void 0!==l){if(!t(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var u,s=r(o.length),c=t(n)?Object(new n(s)):new Array(s),a=0;a<s;)u=o[a],c[a]=l?void 0===i?l(u,a):l.call(i,u,a):u,a+=1;return c.length=s,c})),Array.includes||(Array.prototype.includes=function(e){return!!~this.indexOf(e)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o++}},configurable:!0,writable:!0}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){var n=t>0?0|t:0;return this.substring(n,n+e.length)===e}}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),"Symbol"in self&&0===self.Symbol.length||function(e,t,n){var r,o=function(){try{var t={};return e.defineProperty(t,"t",{configurable:!0,enumerable:!1,get:function(){return!0},set:void 0}),!!t.t}catch(e){return!1}}(),i=0,l=""+Math.random(),u="__symbol:",s=u.length,c="__symbol@@"+l,a={},m="defineProperty",h="defineProperties",f="getOwnPropertyNames",d="getOwnPropertyDescriptor",v="propertyIsEnumerable",p=e.prototype,g=p.hasOwnProperty,y=p[v],b=p.toString,E=Array.prototype.concat,M=e.getOwnPropertyNames?e.getOwnPropertyNames(self):[],C=e[f],w=function(e){if("[object Window]"===b.call(e))try{return C(e)}catch(e){return E.call([],M)}return C(e)},S=e[d],T=e.create,I=e.keys,k=e.freeze||e,A=e[m],L=e[h],O=S(e,f),j=function(e,t,n){if(!g.call(e,c))try{A(e,c,{enumerable:!1,configurable:!1,writable:!1,value:{}})}catch(t){e[c]={}}e[c]["@@"+t]=n},D=function(e,t){var n=T(e);return w(t).forEach((function(e){F.call(t,e)&&V(n,e,t[e])})),n},P=function(){},x=function(e){return e!=c&&!g.call(K,e)},H=function(e){return e!=c&&g.call(K,e)},F=function(e){var t=""+e;return H(t)?g.call(this,t)&&this[c]&&this[c]["@@"+t]:y.call(this,e)},z=function(t){var n={enumerable:!1,configurable:!0,get:P,set:function(e){r(this,t,{enumerable:!1,configurable:!0,writable:!0,value:e}),j(this,t,!0)}};try{A(p,t,n)}catch(e){p[t]=n.value}K[t]=A(e(t),"constructor",q);var o=S(N.prototype,"description");return o&&A(K[t],"description",o),k(K[t])},R=function(e){var t=function(e){if("symbol"===Type(e))return e;throw TypeError(e+" is not a symbol")}(e);if(Z){var n=B(t);if(""!==n)return n.slice(1,-1)}if(void 0!==a[t])return a[t];var r=t.toString(),o=r.lastIndexOf("0.");return""!==(r=r.slice(10,o))?r:void 0},N=function t(){var n=arguments[0];if(this instanceof t)throw new TypeError("Symbol is not a constructor");var r=u.concat(n||"",l,++i);void 0===n||null!==n&&!isNaN(n)&&""!==String(n)||(a[r]=String(n));var s=z(r);return o||e.defineProperty(s,"description",{configurable:!0,enumerable:!1,value:R(s)}),s},K=T(null),q={value:N},_=function(e){return K[e]},V=function(e,t,n){var o=""+t;return H(o)?(r(e,o,n.enumerable?function(e){var t=T(e);return t.enumerable=!1,t}(n):n),j(e,o,!!n.enumerable)):A(e,t,n),e},U=function(e){return w(e).filter(e===p?(t=e,function(e){return g.call(t,c)&&g.call(t[c],"@@"+e)}):H).map(_);var t};O.value=V,A(e,m,O),O.value=U,A(e,"getOwnPropertySymbols",O),O.value=function(e){return w(e).filter(x)},A(e,f,O),O.value=function(e,t){var n=U(t);return n.length?I(t).concat(n).forEach((function(n){F.call(t,n)&&V(e,n,t[n])})):L(e,t),e},A(e,h,O),O.value=F,A(p,v,O),O.value=N,A(n,"Symbol",O),O.value=function(e){var t=u.concat(u,e,l);return t in p?K[t]:z(t)},A(N,"for",O),O.value=function(e){if(x(e))throw new TypeError(e+" is not a symbol");return g.call(K,e)?e.slice(2*s,-l.length):void 0},A(N,"keyFor",O),O.value=function(e,t){var n=S(e,t);return n&&H(t)&&(n.enumerable=F.call(e,t)),n},A(e,d,O),O.value=function(e,t){return 1===arguments.length||void 0===t?T(e):D(e,t)},A(e,"create",O);var W=null===function(){return this}.call(null);if(O.value=W?function(){var e=b.call(this);return"[object String]"===e&&H(this)?"[object Symbol]":e}:function(){if(this===window)return"[object Null]";var e=b.call(this);return"[object String]"===e&&H(this)?"[object Symbol]":e},A(p,"toString",O),r=function(e,t,n){var r=S(p,t);delete p[t],A(e,t,n),e!==p&&A(p,t,r)},function(){try{var t={};return e.defineProperty(t,"t",{configurable:!0,enumerable:!1,get:function(){return!0},set:void 0}),!!t.t}catch(e){return!1}}()){var B;try{B=Function("s","var v = s.valueOf(); return { [v]() {} }[v].name;")}catch(e){}var Z=B&&"inferred"===function(){}.name?B:null;e.defineProperty(n.Symbol.prototype,"description",{configurable:!0,enumerable:!1,get:function(){return R(this)}})}}(Object,0,self),function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}();var p=Symbol("BaseMenu"),g=Symbol("BaseMenuToggle");function y(e){try{if("object"!==o(e)){var t=o(e);throw new TypeError("Elements given to isHTMLElement() must be inside of an object. ".concat(t," given."))}for(var n in e)if(!(e[n]instanceof HTMLElement)){var r=o(e[n]);throw new TypeError("".concat(n," must be an instance of HTMLElement. ").concat(r," given."))}return!0}catch(e){return console.error(e),!1}}function b(e){try{if("object"!==o(e)){var t=o(e);throw new TypeError("Values given to isCSSSelector() must be inside of an object. ".concat(t," given."))}for(var n in e)try{document.querySelector(e[n])}catch(t){throw new TypeError("".concat(n,' must be a valid CSS selector. "').concat(e[n],'" given.'))}return!0}catch(e){return console.error(e),!1}}function E(e){try{if("object"!==o(e)){var t=o(e);throw new TypeError("Values given to isBoolean() must be inside of an object. ".concat(t," given."))}for(var n in e){var r=o(e[n]);if("boolean"!==r)throw new TypeError("".concat(n," must be a boolean. ").concat(r," given."))}return!0}catch(e){return console.error(e),!1}}function M(e){try{if("object"!==o(e)){var t=o(e);throw new TypeError("Values given to isNumber() must be inside of an object. ".concat(t," given."))}for(var n in e){var r=o(e[n]);if("number"!==r)throw new TypeError("".concat(n," must be a number. ").concat(r," given."))}return!0}catch(e){return console.error(e),!1}}function C(e){try{if("object"!==o(e)){var t=o(e);throw new TypeError("Values given to isString() must be inside of an object. ".concat(t," given."))}for(var n in e){var r=o(e[n]);if("string"!==r)throw new TypeError("".concat(n," must be a string. ").concat(r," given."))}return!0}catch(e){return console.error(e),!1}}function w(e){try{if("object"!==o(e)){var t=o(e);throw new TypeError("Elements given to isMenu() must be inside of an object. ".concat(t," given."))}for(var n in e)if(!e[n][p]){var r=o(e[n]);throw new TypeError("".concat(n," must be an instance of BaseMenu. ").concat(r," given."))}return!0}catch(e){return console.error(e),!1}}function S(e,t){return C({event:e}),y({element:t}),void 0!==t["on".concat(e)]}function T(e){try{if("object"!==o(e)){var t=o(e);throw new TypeError("Values given to isValidClassList() must be inside of an object. ".concat(t," given."))}for(var n in e){var r=o(e[n]);if("string"!==r){if(!Array.isArray(e[n]))throw new TypeError("".concat(n," must be a string or an array of strings. ").concat(r," given."));e[n].forEach((function(e){C({classValue:e})}))}}return!0}catch(e){return console.error(e),!1}}var I=function(){function e(t){var n=t.menuToggleElement,r=t.parentElement,o=t.controlledMenu,l=t.parentMenu,u=void 0===l?null:l;i(this,e),y({menuToggleElement:n,parentElement:r}),w(null!==u?{controlledMenu:o,parentMenu:u}:{controlledMenu:o}),this.domElements={toggle:n,parent:r},this.menuElements={controlledMenu:o,parentMenu:u},this.isOpen=!1,this.expandEvent=new CustomEvent("accessibleMenuExpand",{bubbles:!0,detail:{toggle:this}}),this.collapseEvent=new CustomEvent("accessibleMenuCollapse",{bubbles:!0,detail:{toggle:this}}),this.initialize()}return u(e,[{key:"initialize",value:function(){var e=this,t=this.elements.controlledMenu.closeClass;if(this.dom.toggle.setAttribute("aria-haspopup","true"),this.dom.toggle.setAttribute("aria-expanded","false"),function(e,t){if(C({tagName:e})&&y(t)){var n=e.toLowerCase(),r=!0;for(var o in t)t[o].tagName.toLowerCase()!==n&&(r=!1);return r}return!1}("button",{toggle:this.dom.toggle})||this.dom.toggle.setAttribute("role","button"),""===this.dom.toggle.id||""===this.elements.controlledMenu.dom.menu.id){var n=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10),r=this.dom.toggle.innerText.replace(/[^a-zA-Z0-9\s]/g,""),o=n;!r.replace(/\s/g,"").length&&this.dom.toggle.getAttribute("aria-label")&&(r=this.dom.toggle.getAttribute("aria-label").replace(/[^a-zA-Z0-9\s]/g,"")),r.replace(/\s/g,"").length>0&&((r=r.toLowerCase().replace(/\s+/g,"-")).startsWith("-")&&(r=r.substring(1)),r.endsWith("-")&&(r=r.slice(0,-1)),o="".concat(r,"-").concat(o)),this.dom.toggle.id=this.dom.toggle.id||"".concat(o,"-menu-button"),this.elements.controlledMenu.dom.menu.id=this.elements.controlledMenu.dom.menu.id||"".concat(o,"-menu")}this.elements.controlledMenu.dom.menu.setAttribute("aria-labelledby",this.dom.toggle.id),this.dom.toggle.setAttribute("aria-controls",this.elements.controlledMenu.dom.menu.id),""!==t&&("string"==typeof t?this.elements.controlledMenu.dom.menu.classList.add(t):Array.isArray(t)&&t.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.add(t)})))}},{key:"dom",get:function(){return this.domElements}},{key:"elements",get:function(){return this.menuElements}},{key:"isOpen",get:function(){return this.show},set:function(e){E({value:e}),this.show=e}},{key:"expand",value:function(){var e=this,t=this.elements.controlledMenu,n=t.closeClass,r=t.openClass;this.dom.toggle.setAttribute("aria-expanded","true"),""!==r&&("string"==typeof r?this.elements.controlledMenu.dom.menu.classList.add(r):Array.isArray(r)&&r.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.add(t)}))),""!==n&&("string"==typeof n?this.elements.controlledMenu.dom.menu.classList.remove(n):Array.isArray(n)&&n.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.remove(t)}))),this.dom.toggle.dispatchEvent(this.expandEvent)}},{key:"collapse",value:function(){var e=this,t=this.elements.controlledMenu,n=t.closeClass,r=t.openClass;this.dom.toggle.setAttribute("aria-expanded","false"),""!==n&&("string"==typeof n?this.elements.controlledMenu.dom.menu.classList.add(n):Array.isArray(n)&&n.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.add(t)}))),""!==r&&("string"==typeof r?this.elements.controlledMenu.dom.menu.classList.remove(r):Array.isArray(r)&&r.forEach((function(t){e.elements.controlledMenu.dom.menu.classList.remove(t)}))),this.dom.toggle.dispatchEvent(this.collapseEvent)}},{key:"open",value:function(){this.isOpen=!0,this.expand(),this.closeSiblings(),this.elements.parentMenu&&(this.elements.parentMenu.focusState="child"),this.elements.controlledMenu.focusState="self"}},{key:"preview",value:function(){this.isOpen=!0,this.expand(),this.closeSiblings(),this.elements.parentMenu&&(this.elements.parentMenu.focusState="self"),this.elements.controlledMenu.focusState="none"}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.collapse(),this.closeChildren(),this.elements.controlledMenu.currentChild=0,this.elements.controlledMenu.blur(),this.elements.parentMenu&&(this.elements.parentMenu.focusState="self"))}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"closeSiblings",value:function(){var e=this;this.elements.parentMenu&&this.elements.parentMenu.elements.submenuToggles.forEach((function(t){t!==e&&t.close()}))}},{key:"closeChildren",value:function(){this.elements.controlledMenu.elements.submenuToggles.forEach((function(e){return e.close()}))}},{key:g,get:function(){return!0}}]),e}(),k=function(){function e(t){var n=t.menuItemElement,r=t.menuLinkElement,l=t.parentMenu,u=t.isSubmenuItem,s=void 0!==u&&u,c=t.childMenu,a=void 0===c?null:c,m=t.toggle,h=void 0===m?null:m;i(this,e),y({menuItemElement:n,menuLinkElement:r}),E({isSubmenuItem:s}),w(null!==a?{parentMenu:l,childMenu:a}:{parentMenu:l}),null!==h&&function(e){try{if("object"!==o(e)){var t=o(e);throw new TypeError("Elements given to isMenuToggle() must be inside of an object. ".concat(t," given."))}for(var n in e)if(!e[n][g]){var r=o(e[n]);throw new TypeError("".concat(n," must be an instance of BaseMenuToggle. ").concat(r," given."))}}catch(e){return console.error(e),!1}}({toggle:h}),this.domElements={item:n,link:r},this.menuElements={parentMenu:l,childMenu:a,toggle:h},this.isController=s}return u(e,[{key:"initialize",value:function(){}},{key:"dom",get:function(){return this.domElements}},{key:"elements",get:function(){return this.menuElements}},{key:"isSubmenuItem",get:function(){return this.isController}},{key:"focus",value:function(){"mouse"!==this.elements.parentMenu.currentEvent&&this.dom.link.focus()}},{key:"blur",value:function(){"mouse"!==this.elements.parentMenu.currentEvent&&this.dom.link.blur()}}]),e}();function A(e){try{var t=e.key||e.keyCode,n={Enter:"Enter"===t||13===t,Space:" "===t||"Spacebar"===t||32===t,Escape:"Escape"===t||"Esc"===t||27===t,ArrowUp:"ArrowUp"===t||"Up"===t||38===t,ArrowRight:"ArrowRight"===t||"Right"===t||39===t,ArrowDown:"ArrowDown"===t||"Down"===t||40===t,ArrowLeft:"ArrowLeft"===t||"Left"===t||37===t,Home:"Home"===t||36===t,End:"End"===t||35===t,Character:!!t.match(/^[a-zA-Z]{1}$/),Tab:"Tab"===t||9===t};return Object.keys(n).find((function(e){return!0===n[e]}))||""}catch(e){return""}}function L(e){e.preventDefault(),e.stopPropagation()}var O=function(){function e(t){var n=t.menuElement,r=t.menuItemSelector,o=void 0===r?"li":r,l=t.menuLinkSelector,u=void 0===l?"a":l,s=t.submenuItemSelector,c=void 0===s?"":s,a=t.submenuToggleSelector,m=void 0===a?"a":a,h=t.submenuSelector,f=void 0===h?"ul":h,d=t.controllerElement,v=void 0===d?null:d,p=t.containerElement,g=void 0===p?null:p,M=t.openClass,C=void 0===M?"show":M,S=t.closeClass,T=void 0===S?"hide":S,A=t.isTopLevel,L=void 0===A||A,O=t.parentMenu,j=void 0===O?null:O,D=t.isHoverable,P=void 0!==D&&D,x=t.hoverDelay,H=void 0===x?250:x;i(this,e),E({isTopLevel:L}),b(""!==c?{menuItemSelector:o,menuLinkSelector:u,submenuItemSelector:c,submenuToggleSelector:m,submenuSelector:f}:{menuItemSelector:o,menuLinkSelector:u}),y(null!==v||null!==g?{menuElement:n,controllerElement:v,containerElement:g}:{menuElement:n}),null!==j&&w({parentMenu:j}),this.domElements={menu:n,menuItems:[],submenuItems:[],submenuToggles:[],submenus:[],controller:v,container:g},this.domSelectors={menuItems:o,menuLinks:u,submenuItems:c,submenuToggles:m,submenus:f},this.menuElements={menuItems:[],submenuToggles:[],controller:null,parentMenu:j,rootMenu:L?this:null},this.openClass=C||"",this.closeClass=T||"",this.root=L,this.currentChild=0,this.focusState="none",this.currentEvent="none",this.isHoverable=P,this.hoverDelay=H,this.MenuType=e,this.MenuItemType=k,this.MenuToggleType=I}return u(e,[{key:"initialize",value:function(){var e=this.MenuToggleType;if(null===this.elements.rootMenu&&this.findRootMenu(this),this.setDOMElements(),this.isTopLevel&&this.dom.controller&&this.dom.container){var t=new e({menuToggleElement:this.dom.controller,parentElement:this.dom.container,controlledMenu:this,openClass:this.openClass,closeClass:this.closeClass});this.menuElements.controller=t}this.createChildElements()}},{key:"dom",get:function(){return this.domElements}},{key:"selectors",get:function(){return this.domSelectors}},{key:"elements",get:function(){return this.menuElements}},{key:"openClass",get:function(){return this.isTopLevel?this.submenuOpenClass:this.elements.rootMenu.openClass},set:function(e){T({openClass:e}),this.submenuOpenClass=e}},{key:"closeClass",get:function(){return this.isTopLevel?this.submenuCloseClass:this.elements.rootMenu.closeClass},set:function(e){T({closeClass:e}),this.submenuCloseClass=e}},{key:"isTopLevel",get:function(){return this.root}},{key:"currentChild",get:function(){return this.focussedChild},set:function(e){M({value:e}),this.focussedChild=e}},{key:"focusState",get:function(){return this.state},set:function(e){!function(e){try{if("object"!==o(e)){var t=o(e);throw new TypeError("Values given to isValidState() must be inside of an object. ".concat(t," given."))}var n=["none","self","child"];for(var r in e)if(!n.includes(e[r]))throw new TypeError("".concat(r," must be one of the following values: ").concat(n.join(", "),'. "').concat(e[r],'" given.'))}catch(e){return console.error(e),!1}}({value:e}),this.state=e}},{key:"currentEvent",get:function(){return this.event},set:function(e){!function(e){try{if("object"!==o(e)){var t=o(e);throw new TypeError("Values given to isValidEvent() must be inside of an object. ".concat(t," given."))}var n=["none","mouse","keyboard"];for(var r in e)if(!n.includes(e[r]))throw new TypeError("".concat(r," must be one of the following values: ").concat(n.join(", "),'. "').concat(e[r],'" given.'))}catch(e){return console.error(e),!1}}({value:e}),this.event=e}},{key:"currentMenuItem",get:function(){return this.elements.menuItems[this.currentChild]}},{key:"isHoverable",get:function(){return this.isTopLevel?this.hoverable:this.elements.rootMenu.isHoverable},set:function(e){E({value:e}),this.hoverable=e}},{key:"hoverDelay",get:function(){return this.isTopLevel?this.delay:this.elements.rootMenu.hoverDelay},set:function(e){M({value:e}),this.delay=e}},{key:"setDOMElementType",value:function(e,t,n){if("string"!=typeof this.selectors[e])throw new Error("".concat(e," is not a valid element type within the menu."));t&&y({base:t});var r=t||this.dom.menu,o=this.selectors[e],i=Array.from(r.querySelectorAll(o));this.domElements[e]=void 0!==n?"function"==typeof n?i.filter((function(e){return n(e)})):i:i.filter((function(e){return function(e){return e.parentElement===r}(e)}))}},{key:"addDOMElementType",value:function(e,t,n){if("string"!=typeof this.selectors[e])throw new Error("".concat(e," is not a valid element type within the menu."));t&&y({base:t});var r=t||this.dom.menu,o=this.selectors[e],i=Array.from(r.querySelectorAll(o));this.domElements[e]=[].concat(d(this.domElements[e]),d(void 0!==n?"function"==typeof n?i.filter((function(e){return n(e)})):i:i.filter((function(e){return function(e){return e.parentElement===r}(e)}))))}},{key:"clearDOMElementType",value:function(e){if("menu"!==e)if(Array.isArray(this.domElements[e]))this.domElements[e]=[];else{if(void 0===this.domElements[e])throw new Error("".concat(e," is not a valid element type within the menu."));this.domElements[e]=null}}},{key:"setDOMElements",value:function(){var e=this;this.setDOMElementType("menuItems"),""!==this.selectors.submenuItems&&(this.setDOMElementType("submenuItems"),this.clearDOMElementType("submenuToggles"),this.clearDOMElementType("submenus"),this.dom.submenuItems.forEach((function(t){e.addDOMElementType("submenuToggles",t),e.addDOMElementType("submenus",t)})))}},{key:"findRootMenu",value:function(e){if(e.isTopLevel)this.menuElements.rootMenu=e;else{if(null===e.elements.parentMenu)throw new Error("Cannot find root menu.");this.findRootMenu(e.elements.parentMenu)}}},{key:"createChildElements",value:function(){var e=this,t=this.MenuType,n=this.MenuItemType,r=this.MenuToggleType;this.dom.menuItems.forEach((function(o){var i;if(e.dom.submenuItems.includes(o)){var l=o.querySelector(e.selectors.submenuToggles),u=o.querySelector(e.selectors.submenus),s=new t({menuElement:u,menuItemSelector:e.selectors.menuItems,menuLinkSelector:e.selectors.menuLinks,submenuItemSelector:e.selectors.submenuItems,submenuToggleSelector:e.selectors.submenuToggles,submenuSelector:e.selectors.submenus,openClass:e.openClass,closeClass:e.closeClass,isTopLevel:!1,parentMenu:e,isHoverable:e.isHoverable,hoverDelay:e.hoverDelay}),c=new r({menuToggleElement:l,parentElement:o,controlledMenu:s,parentMenu:e});e.menuElements.submenuToggles.push(c),i=new n({menuItemElement:o,menuLinkElement:l,parentMenu:e,isSubmenuItem:!0,childMenu:s,toggle:c})}else{var a=o.querySelector(e.selectors.menuLinks);i=new n({menuItemElement:o,menuLinkElement:a,parentMenu:e})}e.menuElements.menuItems.push(i)}))}},{key:"handleFocus",value:function(){var e=this;this.elements.menuItems.forEach((function(t,n){t.dom.link.addEventListener("focus",(function(){e.elements.parentMenu&&(e.elements.parentMenu.focusState="child"),t.elements.childMenu&&(t.elements.childMenu.focusState="none"),e.focusState="self",e.currentChild=n}))}))}},{key:"handleClick",value:function(){var e=this;function t(e,t,n){L(n),e.currentEvent="mouse",t.toggle(),t.isOpen&&(e.focusState="self",t.elements.controlledMenu.focusState="none")}document.addEventListener("mouseup",(function(t){"none"!==e.focusState&&(e.currentEvent="mouse",e.dom.menu.contains(t.target)||!e.dom.menu===t.target||(e.closeChildren(),e.blur(),e.elements.controller&&e.elements.controller.close()))})),this.elements.submenuToggles.forEach((function(n){S("touchend",n.dom.toggle)?n.dom.toggle.ontouchend=function(r){t(e,n,r)}:n.dom.toggle.onmouseup=function(r){t(e,n,r)}})),this.isTopLevel&&this.elements.controller&&(S("touchend",this.elements.controller.dom.toggle)?this.elements.controller.dom.toggle.ontouchend=function(n){t(e,e.elements.controller,n)}:this.elements.controller.dom.toggle.onmouseup=function(n){t(e,e.elements.controller,n)})}},{key:"handleHover",value:function(){var e=this;this.elements.submenuToggles.forEach((function(t){t.dom.parent.addEventListener("mouseenter",(function(){e.isHoverable&&(e.currentEvent="mouse",t.open())})),t.dom.parent.addEventListener("mouseleave",(function(){e.isHoverable&&setTimeout((function(){e.currentEvent="mouse",t.close()}),e.hoverDelay)}))}))}},{key:"handleKeydown",value:function(){var e=this;this.isTopLevel&&this.elements.controller&&this.elements.controller.dom.toggle.addEventListener("keydown",(function(t){e.currentEvent="keyboard";var n=A(t);"Space"!==n&&"Enter"!==n||L(t)}))}},{key:"handleKeyup",value:function(){var e=this;this.isTopLevel&&this.elements.controller&&this.elements.controller.dom.toggle.addEventListener("keyup",(function(t){e.currentEvent="keyboard";var n=A(t);"Space"!==n&&"Enter"!==n||(L(t),e.elements.controller.open(),e.focusFirstChild())}))}},{key:"focus",value:function(){this.focusState="self","mouse"!==this.currentEvent&&this.dom.menu.focus()}},{key:"blur",value:function(){this.focusState="none","mouse"!==this.currentEvent&&this.dom.menu.blur(),this.isTopLevel&&this.elements.controller&&this.elements.controller.close()}},{key:"focusFirstChild",value:function(){this.blurCurrentChild(),this.currentChild=0,this.focusCurrentChild()}},{key:"focusLastChild",value:function(){this.blurCurrentChild(),this.currentChild=this.elements.menuItems.length-1,this.focusCurrentChild()}},{key:"focusNextChild",value:function(){this.currentChild===this.elements.menuItems.length-1?this.focusFirstChild():(this.blurCurrentChild(),this.currentChild=this.currentChild+1,this.focusCurrentChild())}},{key:"focusPreviousChild",value:function(){0===this.currentChild?this.focusLastChild():(this.blurCurrentChild(),this.currentChild=this.currentChild-1,this.focusCurrentChild())}},{key:"focusCurrentChild",value:function(){-1!==this.currentChild&&this.currentMenuItem.focus()}},{key:"blurCurrentChild",value:function(){-1!==this.currentChild&&this.currentMenuItem.blur()}},{key:"focusNextChildWithCharacter",value:function(e){for(var t=e.toLowerCase(),n=this.currentChild+1,r=!1;!r&&n<this.elements.menuItems.length;){this.elements.menuItems[n].dom.item.innerText.toLowerCase().startsWith(t)&&(r=!0,this.currentChild=n,this.focusCurrentChild()),n++}}},{key:"focusController",value:function(){this.dom.controller&&("mouse"!==this.currentEvent&&this.dom.controller.focus(),this.focusState="none")}},{key:"focusContainer",value:function(){this.dom.container&&("mouse"!==this.currentEvent&&this.dom.container.focus(),this.focusState="none")}},{key:"closeChildren",value:function(){this.elements.submenuToggles.forEach((function(e){return e.close()}))}},{key:p,get:function(){return!0}}]),e}(),j=function(e){s(n,e);var t=h(n);function n(e){var r,o=e.menuItemElement,l=e.menuLinkElement,u=e.parentMenu,s=e.isSubmenuItem,c=void 0!==s&&s,a=e.childMenu,m=void 0===a?null:a,h=e.toggle,f=void 0===h?null:h;return i(this,n),(r=t.call(this,{menuItemElement:o,menuLinkElement:l,parentMenu:u,isSubmenuItem:c,childMenu:m,toggle:f})).initialize(),r}return u(n,[{key:"initialize",value:function(){f(c(n.prototype),"initialize",this).call(this),this.dom.item.setAttribute("role","none"),this.dom.link.setAttribute("role","menuitem"),this.dom.link.tabIndex=-1}},{key:"focus",value:function(){f(c(n.prototype),"focus",this).call(this),this.elements.parentMenu.isTopLevel&&(this.dom.link.tabIndex=0)}},{key:"blur",value:function(){f(c(n.prototype),"blur",this).call(this),this.elements.parentMenu.isTopLevel&&(this.dom.link.tabIndex=-1)}}]),n}(k),D=function(e){s(n,e);var t=h(n);function n(e){var r,o=e.menuToggleElement,l=e.parentElement,u=e.controlledMenu,s=e.openClass,c=void 0===s?"show":s,a=e.closeClass,m=void 0===a?"hide":a,h=e.parentMenu,f=void 0===h?null:h;return i(this,n),(r=t.call(this,{menuToggleElement:o,parentElement:l,controlledMenu:u,openClass:c,closeClass:m,parentMenu:f})).initialize(),r}return n}(I),P=function(e){s(n,e);var t=h(n);function n(e){var r,o=e.menuElement,l=e.menuItemSelector,u=void 0===l?"li":l,s=e.menuLinkSelector,c=void 0===s?"a":s,a=e.submenuItemSelector,m=void 0===a?"":a,h=e.submenuToggleSelector,f=void 0===h?"a":h,d=e.submenuSelector,v=void 0===d?"ul":d,p=e.controllerElement,g=void 0===p?null:p,y=e.containerElement,b=void 0===y?null:y,E=e.openClass,M=void 0===E?"show":E,C=e.closeClass,w=void 0===C?"hide":C,S=e.isTopLevel,T=void 0===S||S,I=e.parentMenu,k=void 0===I?null:I,A=e.isHoverable,L=void 0!==A&&A,O=e.hoverDelay,P=void 0===O?250:O;return i(this,n),(r=t.call(this,{menuElement:o,menuItemSelector:u,menuLinkSelector:c,submenuItemSelector:m,submenuToggleSelector:f,submenuSelector:v,controllerElement:g,containerElement:b,openClass:M,closeClass:w,isTopLevel:T,parentMenu:k,isHoverable:L,hoverDelay:P})).MenuType=n,r.MenuItemType=j,r.MenuToggleType=D,r.initialize(),r}return u(n,[{key:"initialize",value:function(){f(c(n.prototype),"initialize",this).call(this),this.dom.menu.setAttribute("role","menubar"),this.handleFocus(),this.handleClick(),this.handleHover(),this.handleKeydown(),this.handleKeyup(),this.elements.menuItems[0].dom.link.tabIndex=0}},{key:"handleKeydown",value:function(){var e=this;f(c(n.prototype),"handleKeydown",this).call(this),this.dom.menu.addEventListener("keydown",(function(t){e.currentEvent="keyboard";var n=A(t);if("Tab"===n&&("none"!==e.elements.rootMenu.focusState?(e.elements.rootMenu.blur(),e.elements.rootMenu.closeChildren()):e.elements.rootMenu.focus()),"Character"===n)L(t);else if(e.isTopLevel){if("self"===e.focusState){(["ArrowRight","ArrowLeft","Home","End"].includes(n)||e.currentMenuItem.isSubmenuItem&&["Space","Enter","ArrowDown","ArrowUp"].includes(n)||e.elements.controller&&["Escape"].includes(n))&&L(t)}}else{(["Escape","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Home","End"].includes(n)||e.currentMenuItem.isSubmenuItem&&["Space","Enter"].includes(n))&&L(t)}}))}},{key:"handleKeyup",value:function(){var e=this;f(c(n.prototype),"handleKeyup",this).call(this),this.dom.menu.addEventListener("keyup",(function(t){e.currentEvent="keyboard";var n=A(t),r=t.altKey,o=t.crtlKey,i=t.metaKey;if("Character"!==n||(r||o||i))if(e.isTopLevel){if("self"===e.focusState)if("Space"===n||"Enter"===n)e.currentMenuItem.isSubmenuItem&&(L(t),e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusFirstChild()})));else if("ArrowRight"===n){L(t);var l=e.currentMenuItem.isSubmenuItem&&e.currentMenuItem.elements.toggle.isOpen;e.focusNextChild(),l&&(e.currentMenuItem.isSubmenuItem?e.currentMenuItem.elements.toggle.preview():e.closeChildren())}else if("ArrowLeft"===n){L(t);var u=e.currentMenuItem.isSubmenuItem&&e.currentMenuItem.elements.toggle.isOpen;e.focusPreviousChild(),u&&(e.currentMenuItem.isSubmenuItem?e.currentMenuItem.elements.toggle.preview():e.closeChildren())}else if("ArrowDown"===n)e.currentMenuItem.isSubmenuItem&&(L(t),e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusFirstChild()})));else if("ArrowUp"===n)e.currentMenuItem.isSubmenuItem&&(L(t),e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusLastChild()})));else if("Home"===n)L(t),e.focusFirstChild();else if("End"===n)L(t),e.focusLastChild();else if("Escape"===n){e.elements.submenuToggles.some((function(e){return e.isOpen}))?(L(t),e.closeChildren()):e.isTopLevel&&e.elements.controller&&e.elements.controller.isOpen&&(L(t),e.elements.controller.close(),e.focusController())}}else"Space"===n||"Enter"===n?e.currentMenuItem.isSubmenuItem&&(L(t),e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusFirstChild()}))):"Escape"===n?(L(t),e.elements.rootMenu.closeChildren(),e.elements.rootMenu.focusCurrentChild()):"ArrowRight"===n?e.currentMenuItem.isSubmenuItem?(L(t),e.currentMenuItem.elements.toggle.open(),requestAnimationFrame((function(){e.currentMenuItem.elements.childMenu.focusFirstChild()}))):(L(t),e.elements.rootMenu.closeChildren(),e.elements.rootMenu.focusNextChild(),e.elements.rootMenu.currentMenuItem.isSubmenuItem&&e.elements.rootMenu.currentMenuItem.elements.toggle.preview()):"ArrowLeft"===n?e.elements.parentMenu.currentMenuItem.isSubmenuItem&&(L(t),e.elements.parentMenu.currentMenuItem.elements.toggle.close(),e.elements.parentMenu.focusCurrentChild(),e.elements.parentMenu===e.elements.rootMenu&&(e.elements.rootMenu.closeChildren(),e.elements.rootMenu.focusPreviousChild(),e.elements.rootMenu.currentMenuItem.isSubmenuItem&&e.elements.rootMenu.currentMenuItem.elements.toggle.preview())):"ArrowDown"===n?(L(t),e.focusNextChild()):"ArrowUp"===n?(L(t),e.focusPreviousChild()):"Home"===n?(L(t),e.focusFirstChild()):"End"===n&&(L(t),e.focusLastChild());else L(t),e.focusNextChildWithCharacter(t.key)}))}}]),n}(O),x=function(e){s(n,e);var t=h(n);function n(e){var r,o=e.menuItemElement,l=e.menuLinkElement,u=e.parentMenu,s=e.isSubmenuItem,c=void 0!==s&&s,a=e.childMenu,m=void 0===a?null:a,h=e.toggle,f=void 0===h?null:h;return i(this,n),(r=t.call(this,{menuItemElement:o,menuLinkElement:l,parentMenu:u,isSubmenuItem:c,childMenu:m,toggle:f})).initialize(),r}return n}(k),H=function(e){s(n,e);var t=h(n);function n(e){var r,o=e.menuToggleElement,l=e.parentElement,u=e.controlledMenu,s=e.openClass,c=void 0===s?"show":s,a=e.closeClass,m=void 0===a?"hide":a,h=e.parentMenu,f=void 0===h?null:h;return i(this,n),(r=t.call(this,{menuToggleElement:o,parentElement:l,controlledMenu:u,openClass:c,closeClass:m,parentMenu:f})).initialize(),r}return n}(I);return{Menubar:P,DisclosureMenu:function(e){s(n,e);var t=h(n);function n(e){var r,o=e.menuElement,l=e.menuItemSelector,u=void 0===l?"li":l,s=e.menuLinkSelector,c=void 0===s?"a":s,a=e.submenuItemSelector,m=void 0===a?"":a,h=e.submenuToggleSelector,f=void 0===h?"a":h,d=e.submenuSelector,v=void 0===d?"ul":d,p=e.controllerElement,g=void 0===p?null:p,y=e.containerElement,b=void 0===y?null:y,E=e.openClass,M=void 0===E?"show":E,C=e.closeClass,w=void 0===C?"hide":C,S=e.isTopLevel,T=void 0===S||S,I=e.parentMenu,k=void 0===I?null:I,A=e.isHoverable,L=void 0!==A&&A,O=e.hoverDelay,j=void 0===O?250:O;return i(this,n),(r=t.call(this,{menuElement:o,menuItemSelector:u,menuLinkSelector:c,submenuItemSelector:m,submenuToggleSelector:f,submenuSelector:v,controllerElement:g,containerElement:b,openClass:M,closeClass:w,isTopLevel:T,parentMenu:k,isHoverable:L,hoverDelay:j})).MenuType=n,r.MenuItemType=x,r.MenuToggleType=H,r.currentChild=-1,r.initialize(),r}return u(n,[{key:"initialize",value:function(){f(c(n.prototype),"initialize",this).call(this),this.handleFocus(),this.handleClick(),this.handleHover(),this.handleKeydown(),this.handleKeyup()}},{key:"handleKeydown",value:function(){var e=this;f(c(n.prototype),"handleKeydown",this).call(this),this.dom.menu.addEventListener("keydown",(function(t){e.currentEvent="keyboard";var n=A(t);if("self"===e.focusState){(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft","Home","End"].includes(n)||e.currentMenuItem.isSubmenuItem&&["Space","Enter"].includes(n)||e.elements.controller&&["Escape"].includes(n)||e.elements.parentMenu&&["Escape"].includes(n))&&L(t)}}))}},{key:"handleKeyup",value:function(){var e=this;f(c(n.prototype),"handleKeyup",this).call(this),this.dom.menu.addEventListener("keyup",(function(t){e.currentEvent="keyboard";var n=A(t);if("self"===e.focusState)if("Space"===n||"Enter"===n)e.currentMenuItem.isSubmenuItem&&(L(t),e.currentMenuItem.elements.toggle.preview());else if("Escape"===n){e.elements.submenuToggles.some((function(e){return e.isOpen}))?(L(t),e.closeChildren()):e.elements.parentMenu?(L(t),e.elements.parentMenu.closeChildren(),e.elements.parentMenu.focusCurrentChild()):e.isTopLevel&&e.elements.controller&&e.elements.controller.isOpen&&(e.elements.controller.close(),e.focusController())}else"ArrowDown"===n||"ArrowRight"===n?(L(t),e.currentMenuItem.isSubmenuItem&&e.currentMenuItem.elements.toggle.isOpen?e.currentMenuItem.elements.childMenu.focusFirstChild():e.focusNextChild()):"ArrowUp"===n||"ArrowLeft"===n?(L(t),e.focusPreviousChild()):"Home"===n?(L(t),e.focusFirstChild()):"End"===n&&(L(t),e.focusLastChild())}))}},{key:"focusNextChild",value:function(){this.currentChild<this.elements.menuItems.length-1&&(this.blurCurrentChild(),this.currentChild=this.currentChild+1,this.focusCurrentChild())}},{key:"focusPreviousChild",value:function(){this.currentChild>0&&(this.blurCurrentChild(),this.currentChild=this.currentChild-1,this.focusCurrentChild())}}]),n}(O)}}();
